[![Go](https://github.com/NekoFluff/go-youtube-notification-bot/actions/workflows/go.yml/badge.svg)](https://github.com/NekoFluff/go-youtube-notification-bot/actions/workflows/go.yml)

# Hololive Livestream Notification Bot

Sends notifications about when Hololive livestreams will start.

Requires a server text room with the name `#hololive-notifications` and `#hololive-stream-started`.

A notification will be posted to the `#hololive-notifications` room when a stream is scheduled to start and 15 minutes prior to it starting. The bot will also post a message to the `#hololive-stream-started` room when the stream starts.

Bot link: <a>https://discord.com/api/oauth2/authorize?client_id=920909355254169631&permissions=395137247312&scope=bot</a>

# Copying the project?

## Requirements

- Heroku (you can another hosting service if you want)
- MongoDB database (e.g. [Free MongoDB Atlas cluster](https://www.mongodb.com/products/platform/atlas-database))
- [MongoDB Compass](https://www.mongodb.com/products/tools/compass) (optional)
- [golang](https://go.dev/doc/install)
- [Youtube API key](https://developers.google.com/youtube/v3/getting-started)

# Hosting on Heroku (Production)

I hosted my bot on Heroku. If you'd like to follow the same path, [here](https://devcenter.heroku.com/articles/git) is a developer's guide on how to deploy an app to Heroku.

## 1. Set up a MongoDB Database and the Collections

You can get a free cluster from MongoDB Atlas and can use MongoDB Compass to interface with the cluster.
You will need to create a `hololive-en` database. In this database, you'll need to create three collections: `feeds`, `scheduledLivestreams`, `subscriptions`.

### Feeds

You only need to manually generate documents in the `feeds` collection. Each document describes the vtuber being tracked.

Example:

```json
{
  "firstName": "gawr",
  "lastName": "gura",
  "topicURL": "https://www.youtube.com/xml/feeds/videos.xml?channel_id=UCoSrY_IQQVpmIRZ9Xf-y93g",
  "group": "en",
  "generation": 1
}
```

### ScheduledLivestreams

This collection is automatically generated by the bot. It stores the scheduled livestreams for each vtuber.

```json
{
  "_id": {
    "$oid": "6291b9512d520094b6173697"
  },
  "url": "https://www.youtube.com/watch?v=197OEpjj8RI",
  "author": "Hakos Baelz Ch. hololive-EN",
  "date": {
    "$date": "2025-08-31T14:00:00.000Z"
  },
  "title": "≪FREE CHAT/VSPACER CHAT≫ WAZZUP!",
  "updated": {
    "$date": "2023-09-29T02:31:42.396Z"
  }
}
```

### Subscriptions

This collection is automatically generated by the bot. It stores the subscriptions for each user.

```json
{
  "_id": {
    "$oid": "5f6abf6a1940cd2664c21006"
  },
  "user": "123456789",
  "subscription": "amelia"
}
```

## 2. Set up the environment & config variables

All the environment variables you need are in the `.env.example` file. You can ignore the `TWITCH_X` values. They were just for personal use to get notifications for a specific Twitch streamer.
You can [set the environment variables](https://devcenter.heroku.com/articles/config-vars#managing-config-vars) in the Heroku dashboard or use the Heroku CLI.

## 3. Profit

Assuming you've set the environment variables correctly, you should be good to go. If things aren't working, you can check the logs in the Heroku dashboard or use the Heroku CLI. Feel free to reach out to me if you have any questions. Contact information is at the bottom of this README.

# Local Development

If you plan on making functional changes yourself, here's a hastily put together guide for hosting the bot locally.

## 1. Set up a MongoDB Database and the Collections

You can either host the MongoDB Database yourself or get a free cluster from MongoDB Atlas. If you choose to host it yourself, you can follow the [official MongoDB installation guide](https://docs.mongodb.com/manual/installation/). If you're tech savvy, you can also use Docker to host the database. You'll just need to update the `.env` file with the correct connection string. Maybe I'll get around to this if someone asks.

Follow the same steps as above from the Production section to create the `hololive-en` database and the collections.

## 2. Set up the environment & config variables

Copy the `.env.example` to `.env` and fill in the required values. You can ignore the `TWITCH_X` values. They were just for personal use to get notifications for a specific streamer.

## 3. Run the bot

```bash
go run cmd/bot/main.go
```

## Extras

Theres a Makefile with some useful commands. (e.g. `make test` to run the tests and `make gen` to generate the test mocks)

## Questions?

Feel free to contact me below:

Discord: <b>crazyfluff</b>

Twitter: <b>@SheavinNou</b>
